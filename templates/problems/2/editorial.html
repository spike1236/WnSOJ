<p>There are many solutions to this problem. One of them is using <a href="https://brestprog.by/topics/segmenttree/">segment tree.</a></p>