<p>There are many solutions to this problem. One of them is using <a href="https://en.wikipedia.org/wiki/Segment_tree">segment tree.</a></p>